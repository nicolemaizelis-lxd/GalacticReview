<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Exam Prep - Galactic Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0c1427; /* Dark background */
            color: #e0e0e0; /* Light text */
        }
        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }
        .container-panel {
            background: rgba(18, 27, 51, 0.6); /* Glassy dark panel background */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1); /* Light border */
        }
        .section-header {
            color: #67e8f9; /* Cyan for headers */
        }
        .sub-section-header {
            color: #a5f3fc; /* Lighter cyan for sub-headers */
        }
        .activity-panel {
            background: rgba(12, 20, 39, 0.5); /* Darker glassy background for activities */
            border: 1px solid rgba(103, 232, 249, 0.3); /* Cyan border */
        }
        .btn-primary {
            background-color: #0d9488; /* Teal button */
            color: white;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-primary:hover {
            background-color: #0f766e; /* Darker teal on hover */
        }
        .answer-box {
            display: none;
            transition: all 0.3s ease-in-out;
        }
        .question-card {
            background-color: #1a1e26;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .question-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.3);
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1a202c;
            color: #e0e0e0;
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid #4a5568;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            animation: fadeInOut 3s forwards;
        }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translate(-50%, -20px); }
            10%, 90% { opacity: 1; transform: translate(-50%, 0); }
        }
    </style>
</head>

<body class="antialiased p-4">
    <div id="message-container"></div>

    <div class="max-w-4xl mx-auto container-panel rounded-lg p-6 md:p-8 shadow-lg">
        <header class="text-center mb-8">
            <h1 class="font-orbitron text-3xl md:text-4xl font-bold section-header">Final Exam Preparation</h1>
            <p class="text-lg md:text-xl text-gray-400 mt-2">Prove you're ready for the stars, Cadets. This is your final practice mission!</p>
        </header>
        
        <p class="text-sm text-gray-400 mt-4 mb-6 text-center">
            <i class="fa-solid fa-circle-info"></i> Tip: When entering exponents, please use the caret symbol (e.g., `10^8` for `10⁸`).
        </p>

        <!-- Grade 7 Cadets Section -->
        <section class="mb-10 p-6 activity-panel rounded-lg">
            <h2 class="font-orbitron text-2xl section-header mb-4">Grade 7 Cadet Examination</h2>
            
            <!-- Question 1 (G7 B1.1) - Straightforward -->
            <div class="question-card p-6 rounded-lg mb-6">
                <p class="font-semibold text-lg sub-section-header mb-2" id="q-g7-1">1. **Stellar Census:** The estimated number of stars in a nearby galaxy is 450,000,000. Write this number in expanded form using powers of ten.</p>
                <input type="text" id="input-g7-1" class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Your answer here...">
                <div class="button-group">
                    <button onclick="checkAnswer('g7-1')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
                    <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
                </div>
                <div id="feedback-g7-1" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
                <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
                    <p><strong>Answer:</strong> (4 x 10⁸) + (5 x 10⁷)</p>
                </div>
            </div>

            <!-- Question 2 (G7 B1.2) - Problem -->
            <div class="question-card p-6 rounded-lg mb-6">
                <p class="font-semibold text-lg sub-section-header mb-2" id="q-g7-2">2. **Asteroid Field Navigation:** A new square asteroid field has an area of 169 square units. If a pilot flies along two adjacent sides of the field, what is the total distance the pilot flew? Explain your reasoning.</p>
                <input type="text" id="input-g7-2" class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Your answer here...">
                <div class="button-group">
                    <button onclick="checkAnswer('g7-2')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
                    <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
                </div>
                <div id="feedback-g7-2" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
                <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
                    <p><strong>Answer:</strong> The square root of 169 is 13, so each side is 13 units long. The pilot flew along two adjacent sides, so the total distance is 13 + 13 = 26 units.</p>
                </div>
            </div>

            <!-- Question 3 (G7 B1.3) - Straightforward -->
            <div class="question-card p-6 rounded-lg mb-6">
                <p class="font-semibold text-lg sub-section-header mb-2" id="q-g7-3">3. **Warp Drive Coordinates:** Order the following coordinates from greatest to least: 3/5, -0.75, 0.65, 1.</p>
                <input type="text" id="input-g7-3" class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Your answer here...">
                <div class="button-group">
                    <button onclick="checkAnswer('g7-3')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
                    <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
                </div>
                <div id="feedback-g7-3" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
                <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
                    <p><strong>Answer:</strong> 1, 0.65, 3/5, -0.75</p>
                </div>
            </div>

            <!-- Question 4 (G7 B2.7) - Problem -->
            <div class="question-card p-6 rounded-lg mb-6">
                <p class="font-semibold text-lg sub-section-header mb-2" id="q-g7-4">4. **Quantum Communication:** A quantum signal's strength is measured as 5 x 5 x 5 x 5 x 5. Express this value using exponential notation.</p>
                <input type="text" id="input-g7-4" class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Your answer here...">
                <div class="button-group">
                    <button onclick="checkAnswer('g7-4')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
                    <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
                </div>
                <div id="feedback-g7-4" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
                <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
                    <p><strong>Answer:</strong> In exponential notation, this is 5⁵. As a whole number, it is 5 x 5 x 5 x 5 x 5 = 3125.</p>
                </div>
            </div>

            <!-- Question 5 (G7 B1.6) - Straightforward -->
            <div class="question-card p-6 rounded-lg mb-6">
                <p class="font-semibold text-lg sub-section-header mb-2" id="q-g7-5">5. **Galactic Report:** A celestial body has an atmospheric temperature of -210.482° Celsius. Round this temperature to the nearest hundredth.</p>
                <input type="text" id="input-g7-5" class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="Your answer here...">
                <div class="button-group">
                    <button onclick="checkAnswer('g7-5')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
                    <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
                </div>
                <div id="feedback-g7-5" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
                <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
                    <p><strong>Answer:</strong> -210.48° Celsius.</p>
                </div>
            </div>
        </section>

    </div>

    <script>
        // Store correct answers and their custom validation logic
        const correctAnswers = {
            'g7-1': {
                correct: '(4 x 10⁸) + (5 x 10⁷)',
                validate: (input) => {
                    const normalizedInput = input.replace(/\s/g, '').replace(/\^/g, '').toLowerCase();
                    const part1 = '4x108';
                    const part2 = '5x107';
                    // This is a more flexible check to see if both parts exist, regardless of order or grouping
                    const hasPart1 = normalizedInput.includes(part1);
                    const hasPart2 = normalizedInput.includes(part2);
                    return hasPart1 && hasPart2;
                }
            },
            'g7-2': {
                correct: '26',
                validate: (input) => {
                    // Check for the number 26, ignoring any surrounding text
                    const number = parseFloat(input.match(/[\d.]+/));
                    return number === 26;
                }
            },
            'g7-3': {
                correct: '1, 0.65, 3/5, -0.75',
                validate: (input) => {
                    const normalizedInput = input.replace(/\s/g, '');
                    // We check for all possible valid formats
                    const correctOrderDecimals = [1, 0.65, 0.6, -0.75];
                    const userParts = normalizedInput.split(',').map(part => {
                        if (part === '3/5') return 0.6;
                        return parseFloat(part);
                    });

                    // Check if the order is correct
                    if (userParts.length !== correctOrderDecimals.length) return false;
                    for (let i = 0; i < correctOrderDecimals.length; i++) {
                        if (userParts[i] !== correctOrderDecimals[i]) {
                            return false;
                        }
                    }
                    return true;
                }
            },
            'g7-4': {
                correct: '3125',
                validate: (input) => {
                    const normalizedInput = input.replace(/\s/g, '').toLowerCase();
                    // Check for either the number or the exponential form
                    return normalizedInput === '3125' || normalizedInput === '5^5' || normalizedInput === '5e5';
                }
            },
            'g7-5': {
                correct: '-210.48',
                validate: (input) => {
                    // Simple numerical comparison
                    const number = parseFloat(input);
                    return number === -210.48;
                }
            }
        };

        // Function to show a temporary message box
        function showMessage(text) {
            const container = document.getElementById('message-container');
            const messageBox = document.createElement('div');
            messageBox.className = 'message-box';
            messageBox.textContent = text;
            container.appendChild(messageBox);
            setTimeout(() => {
                messageBox.remove();
            }, 3000);
        }

        // Function to toggle the visibility of the answer box
        function toggleAnswer(button) {
            const answerBox = button.closest('.button-group').nextElementSibling.nextElementSibling;
            if (answerBox) {
                if (answerBox.style.display === "block") {
                    answerBox.style.display = "none";
                    button.textContent = "Show Answer";
                } else {
                    answerBox.style.display = "block";
                    button.textContent = "Hide Answer";
                }
            }
        }
        
        /**
         * Checks if the user's answer is correct using the custom validation logic.
         * @param {string} questionId - The ID of the question.
         */
        function checkAnswer(questionId) {
            const feedbackElement = document.getElementById(`feedback-${questionId}`);
            const inputElement = document.getElementById(`input-${questionId}`);
            
            // Check if the input element exists
            if (!inputElement) {
                console.error(`Input element with ID 'input-${questionId}' not found.`);
                feedbackElement.style.display = "block";
                feedbackElement.textContent = "Error: Input field not found.";
                feedbackElement.style.backgroundColor = 'rgba(239, 68, 68, 0.2)';
                feedbackElement.style.color = '#ef4444';
                return;
            }

            const userAnswer = inputElement.value.trim();
            const questionData = correctAnswers[questionId];
            
            let isCorrect = false;
            if (questionData && typeof questionData.validate === 'function') {
                try {
                    isCorrect = questionData.validate(userAnswer);
                } catch (e) {
                    console.error(`Error during validation for ${questionId}:`, e);
                    isCorrect = false;
                }
            } else {
                console.error(`No validation function found for question ID: ${questionId}`);
                isCorrect = false;
            }
            
            feedbackElement.style.display = "block";
            
            if (isCorrect) {
                feedbackElement.textContent = "Mission Accomplished! Answer is correct. ✅";
                feedbackElement.style.backgroundColor = 'rgba(16, 185, 129, 0.2)'; // Green tint
                feedbackElement.style.color = '#10b981'; // Green text
            } else {
                feedbackElement.textContent = "Incorrect. Try again, Cadet. ❌";
                feedbackElement.style.backgroundColor = 'rgba(239, 68, 68, 0.2)'; // Red tint
                feedbackElement.style.color = '#ef4444'; // Red text
            }
        }
    </script>
</body>
</html>
