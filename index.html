<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Final Exam Prep - Galactic Academy</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

  <style>
    body {
      font-family: "Roboto", sans-serif;
      background-color: #0c1427;
      color: #e0e0e0;
    }
    .font-orbitron {
      font-family: "Orbitron", sans-serif;
    }
    .container-panel {
      background: rgba(18, 27, 51, 0.6);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .section-header {
      color: #67e8f9;
    }
    .sub-section-header {
      color: #a5f3fc;
    }
    .activity-panel {
      background: rgba(12, 20, 39, 0.5);
      border: 1px solid rgba(103, 232, 249, 0.3);
    }
    .btn-primary {
      background-color: #0d9488;
      color: white;
      transition: background-color 0.2s ease-in-out;
    }
    .btn-primary:hover {
      background-color: #0f766e;
    }
    .answer-box {
      display: none;
      transition: all 0.3s ease-in-out;
    }
    .question-card {
      background-color: #1a1e26;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .question-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 12px rgba(0, 0, 0, 0.3);
    }
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .message-box {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #1a202c;
      color: #e0e0e0;
      padding: 10px 20px;
      border-radius: 8px;
      border: 1px solid #4a5568;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      animation: fadeInOut 3s forwards;
    }
    @keyframes fadeInOut {
      0%,
      100% {
        opacity: 0;
        transform: translate(-50%, -20px);
      }
      10%,
      90% {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }
  </style>
</head>

<body class="antialiased p-4">
  <div id="message-container"></div>

  <div class="max-w-4xl mx-auto container-panel rounded-lg p-6 md:p-8 shadow-lg">
    <header class="text-center mb-8">
      <h1 class="font-orbitron text-3xl md:text-4xl font-bold section-header">Final Exam Preparation</h1>
      <p class="text-lg md:text-xl text-gray-400 mt-2">Prove you're ready for the stars, Cadets. This is your final practice mission!</p>
    </header>

    <p class="text-sm text-gray-400 mt-4 mb-6 text-center">
      <i class="fa-solid fa-circle-info"></i>
      Tip: When entering exponents, use the caret symbol (e.g., 10^8).
    </p>

    <section class="mb-10 p-6 activity-panel rounded-lg">
      <h2 class="font-orbitron text-2xl section-header mb-4">Grade 7 Cadet Examination</h2>

      <div class="question-card p-6 rounded-lg mb-6">
        <p class="text-lg sub-section-header mb-2" id="q-g7-1">
          1. Stellar Census: The estimated number of stars in a nearby galaxy is 450,000,000. Write this number in expanded form using powers of ten.
        </p>
        <input
          type="text"
          id="input-g7-1"
          class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"
          placeholder="Your answer here..."
        />
        <div class="button-group">
          <button onclick="checkAnswer('g7-1')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
          <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
        </div>
        <div id="feedback-g7-1" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
        <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
          <p><strong>Answer:</strong> (4 × 10<sup>8</sup>) + (5 × 10<sup>7</sup>)</p>
        </div>
      </div>

      <div class="question-card p-6 rounded-lg mb-6">
        <p class="text-lg sub-section-header mb-2" id="q-g7-2">
          2. Asteroid Field Navigation: A new square asteroid field has an area of 169 square units. If a pilot flies along two adjacent sides of the field, what is the total distance the pilot flew? Explain your reasoning.
        </p>
        <input
          type="text"
          id="input-g7-2"
          class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"
          placeholder="Your answer here..."
        />
        <div class="button-group">
          <button onclick="checkAnswer('g7-2')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
          <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
        </div>
        <div id="feedback-g7-2" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
        <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
          <p><strong>Answer:</strong> The square root of 169 is 13, so each side is 13 units long. The pilot flew along two adjacent sides, so the total distance is 13 + 13 = 26 units.</p>
        </div>
      </div>

      <div class="question-card p-6 rounded-lg mb-6">
        <p class="text-lg sub-section-header mb-2" id="q-g7-3">
          3. Warp Drive Coordinates: Order the following coordinates from greatest to least: 3/5, -0.75, 0.65, 1.
        </p>
        <input
          type="text"
          id="input-g7-3"
          class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"
          placeholder="Your answer here..."
        />
        <div class="button-group">
          <button onclick="checkAnswer('g7-3')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
          <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
        </div>
        <div id="feedback-g7-3" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
        <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
          <p><strong>Answer:</strong> 1, 0.65, 3/5, -0.75</p>
        </div>
      </div>

      <div class="question-card p-6 rounded-lg mb-6">
        <p class="text-lg sub-section-header mb-2" id="q-g7-4">
          4. Quantum Communication: A quantum signal's strength is measured as 5 × 5 × 5 × 5 × 5. Express this value using exponential notation.
        </p>
        <input
          type="text"
          id="input-g7-4"
          class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"
          placeholder="Your answer here..."
        />
        <div class="button-group">
          <button onclick="checkAnswer('g7-4')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
          <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
        </div>
        <div id="feedback-g7-4" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
        <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
          <p><strong>Answer:</strong> 5<sup>5</sup>. As a whole number, 5 × 5 × 5 × 5 × 5 = 3125.</p>
        </div>
      </div>

      <div class="question-card p-6 rounded-lg mb-6">
        <p class="text-lg sub-section-header mb-2" id="q-g7-5">
          5. Galactic Report: A celestial body has an atmospheric temperature of -210.482°C. Round this temperature to the nearest hundredth.
        </p>
        <input
          type="text"
          id="input-g7-5"
          class="w-full mt-2 p-2 rounded-md bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500"
          placeholder="Your answer here..."
        />
        <div class="button-group">
          <button onclick="checkAnswer('g7-5')" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Check Answer</button>
          <button onclick="toggleAnswer(this)" class="btn-primary px-4 py-2 mt-4 rounded-full text-sm">Show Answer</button>
        </div>
        <div id="feedback-g7-5" class="mt-4 p-4 rounded-lg text-center font-bold" style="display: none;"></div>
        <div class="answer-box mt-4 p-4 rounded-lg bg-gray-800 border border-gray-700">
          <p><strong>Answer:</strong> -210.48°C.</p>
        </div>
      </div>
    </section>
  </div>

  <script>
    function normalizeSuperscripts(s) {
      // Convert common superscript digits to normal digits.
      const map = { "⁰": "0", "¹": "1", "²": "2", "³": "3", "⁴": "4", "⁵": "5", "⁶": "6", "⁷": "7", "⁸": "8", "⁹": "9" };
      return s.replace(/[⁰¹²³⁴⁵⁶⁷⁸⁹]/g, (ch) => map[ch] || ch);
    }

    function normalizeMathInput(input) {
      // Lowercase, remove spaces, normalise × to x, convert superscripts, standardize "10^8" style.
      let s = (input || "").toLowerCase();
      s = normalizeSuperscripts(s);
      s = s.replace(/\s/g, "");
      s = s.replace(/×/g, "x");
      // If user typed 10⁸ (now 108), try to re-insert caret only when it looks like 10 followed by a 1-2 digit exponent.
      // This keeps validation flexible, not strict parsing.
      return s;
    }

    const correctAnswers = {
      "g7-1": {
        correct: "(4 × 10^8) + (5 × 10^7)",
        validate: (input) => {
          const s = normalizeMathInput(input).replace(/[()]/g, "");
          // Accept forms like 4x10^8, 4x108, 4*10^8, etc.
          const hasPart1 =
            s.includes("4x10^8") || s.includes("4x108") || s.includes("4*10^8") || s.includes("4*108");
          const hasPart2 =
            s.includes("5x10^7") || s.includes("5x107") || s.includes("5*10^7") || s.includes("5*107");
          return hasPart1 && hasPart2;
        },
      },
      "g7-2": {
        correct: "26",
        validate: (input) => {
          const match = (input || "").match(/-?\d+(\.\d+)?/);
          if (!match) return false;
          return parseFloat(match[0]) === 26;
        },
      },
      "g7-3": {
        correct: "1, 0.65, 3/5, -0.75",
        validate: (input) => {
          const normalizedInput = (input || "").replace(/\s/g, "");
          const correctOrder = [1, 0.65, 0.6, -0.75];

          const userParts = normalizedInput.split(",").map((part) => {
            if (part === "3/5") return 0.6;
            return parseFloat(part);
          });

          if (userParts.length !== correctOrder.length) return false;

          for (let i = 0; i < correctOrder.length; i++) {
            if (Number.isNaN(userParts[i])) return false;
            if (userParts[i] !== correctOrder[i]) return false;
          }
          return true;
        },
      },
      "g7-4": {
        correct: "5^5 or 3125",
        validate: (input) => {
          const s = normalizeMathInput(input);
          return s === "3125" || s === "5^5" || s === "5**5" || s === "55";
        },
      },
      "g7-5": {
        correct: "-210.48",
        validate: (input) => {
          const n = parseFloat(input);
          return n === -210.48;
        },
      },
    };

    function toggleAnswer(button) {
      const answerBox = button.closest(".button-group").nextElementSibling.nextElementSibling;
      if (!answerBox) return;

      if (answerBox.style.display === "block") {
        answerBox.style.display = "none";
        button.textContent = "Show Answer";
      } else {
        answerBox.style.display = "block";
        button.textContent = "Hide Answer";
      }
    }

    function checkAnswer(questionId) {
      const feedbackElement = document.getElementById(`feedback-${questionId}`);
      const inputElement = document.getElementById(`input-${questionId}`);

      if (!inputElement || !feedbackElement) return;

      const userAnswer = inputElement.value.trim();
      const questionData = correctAnswers[questionId];

      let isCorrect = false;
      if (questionData && typeof questionData.validate === "function") {
        try {
          isCorrect = questionData.validate(userAnswer);
        } catch (e) {
          isCorrect = false;
        }
      }

      feedbackElement.style.display = "block";

      if (isCorrect) {
        feedbackElement.textContent = "Mission accomplished. Well done, Cadet!";
        feedbackElement.style.backgroundColor = "rgba(16, 185, 129, 0.2)";
        feedbackElement.style.color = "#10b981";
      } else {
        feedbackElement.textContent = "Incorrect. Try again, Cadet.";
        feedbackElement.style.backgroundColor = "rgba(239, 68, 68, 0.2)";
        feedbackElement.style.color = "#ef4444";
      }
    }
  </script>
</body>
</html>
